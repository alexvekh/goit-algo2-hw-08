# Rate Limiter –¥–ª—è –ß–∞—Ç-–°–∏—Å—Ç–µ–º–∏

–¶–µ–π –ø—Ä–æ—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –¥–≤—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ –æ–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (Rate Limiting) –¥–ª—è —á–∞—Ç-—Å–∏—Å—Ç–µ–º–∏:

- **Sliding Window Rate Limiter**
- **Throttling Rate Limiter**

–ú–µ—Ç–æ—é —î –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è —Å–ø–∞–º—É –≤ —á–∞—Ç—ñ —à–ª—è—Ö–æ–º –∫–æ–Ω—Ç—Ä–æ–ª—é –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∞–±–æ —á–∞—Å—Ç–æ—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, —è–∫—ñ –º–æ–∂–µ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞ –ø–µ–≤–Ω–∏–π —á–∞—Å.

---

# ‚öôÔ∏è 1. SlidingWindowRateLimiter

### –û–ø–∏—Å

–¶–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–æ–∑–≤–æ–ª—è—î –º–∞–∫—Å–∏–º—É–º **N –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ T —Å–µ–∫—É–Ω–¥**. –ö–æ–∂–Ω–µ –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –≤ sliding window (—á–∞—Å–æ–≤–µ –≤—ñ–∫–Ω–æ) –≤–∂–µ —î –¥–æ–∑–≤–æ–ª–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –Ø–∫—â–æ –Ω—ñ ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ–∑–≤–æ–ª—è—î—Ç—å—Å—è, —ñ–Ω–∞–∫—à–µ ‚Äî –±–ª–æ–∫—É—î—Ç—å—Å—è.

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:

- `window_size` ‚Äì —Ä–æ–∑–º—ñ—Ä –≤—ñ–∫–Ω–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `10`)
- `max_requests` ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–∑–≤–æ–ª–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É –≤—ñ–∫–Ω—ñ (`1`)

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:

- `can_send_message(user_id)` ‚Äì —á–∏ –º–æ–∂–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `record_message(user_id)` ‚Äì –∑–∞–ø–∏—Å—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—â–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ
- `time_until_next_allowed(user_id)` ‚Äì —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É —á–µ–∫–∞—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –¥–æ–∑–≤–æ–ª—É

### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø—É—Å–∫—É:

    python sliding_window_limiter.py


# üß≠ 2. ThrottlingRateLimiter

–¶–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º –∑–∞–±–µ–∑–ø–µ—á—É—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–µ –±—ñ–ª—å—à–µ 1 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 10 —Å–µ–∫—É–Ω–¥. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–∞–Ω—ñ—à–µ ‚Äî –≤–æ–Ω–æ –±–ª–æ–∫—É—î—Ç—å—Å—è.

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:
- `min_interval` ‚Äì –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 10 —Å–µ–∫—É–Ω–¥)

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:
- `can_send_message(user_id)` ‚Äì —á–∏ –º–æ–∂–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `record_message(user_id)` ‚Äì –∑–∞–ø–∏—Å—É—î —á–∞—Å –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è, —è–∫—â–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ
- `time_until_next_allowed(user_id)` ‚Äì —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –∑–∞–ª–∏—à–∏–ª–æ—Å—è –¥–æ –¥–æ–∑–≤–æ–ª—É

### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø—É—Å–∫—É:
    python throttling_limiter.py

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
–û–±–∏–¥–≤–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –º–∞—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó test_rate_limiter() —Ç–∞ test_throttling_limiter() –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ. –í–æ–Ω–∏ —ñ–º—ñ—Ç—É—é—Ç—å –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ –∑–∞—Ç—Ä–∏–º–∫–∞–º–∏.

–í–∏–≤—ñ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:

    –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è  1 | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á 2 | ‚úì
    –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è  6 | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á 2 | √ó (–æ—á—ñ–∫—É–≤–∞–Ω–Ω—è 7.0—Å)
